

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Things To Know &mdash; gama 2019.08.0 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> gama
          

          
          </a>

          
            
            
              <div class="version">
                2019.08.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="index.html">User Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/index.html">API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../releases.html">Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../contributing/index.html">Contributing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../citing.html">Citing</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">gama</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
      <li>Things To Know</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/user_guide/things_to_know.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="things-to-know">
<h1>Things To Know<a class="headerlink" href="#things-to-know" title="Permalink to this headline">¶</a></h1>
<p>GAMA is currently in development.
This means things can change, from at the interface level to the optimization procedure level.
However, we expect few changes that break old code, and will document them when we make them.</p>
<div class="section" id="important-hyperparameters">
<h2>Important Hyperparameters<a class="headerlink" href="#important-hyperparameters" title="Permalink to this headline">¶</a></h2>
<p>GAMA has a lot of hyperparameters to tweak.
Finding the best defaults is always a work in progress, so if you run into issues, try tuning some of them.</p>
<p>Here is a selection that might be of particular interest that are accessed on initialization:</p>
<p><strong>scoring</strong>: states towards which metric to optimize
Multi-objective optimization will optimize towards the metric specified by <code class="code docutils literal notranslate"><span class="pre">scoring</span></code>, as well as minimizing pipeline length.
Make sure to optimize towards the metric that reflects well what is important to you.
Valid options include <code class="code docutils literal notranslate"><span class="pre">roc_auc</span></code>, <code class="code docutils literal notranslate"><span class="pre">accuracy</span></code> and <code class="code docutils literal notranslate"><span class="pre">log_loss</span></code> for classification, and <code class="code docutils literal notranslate"><span class="pre">mean_squared_error</span></code> and <code class="code docutils literal notranslate"><span class="pre">r2</span></code> for regression.
For more options see <a class="reference external" href="https://pgijsbers.github.io/gama/api/index.html#api">API documentation</a>.</p>
<p><strong>n_jobs</strong>: determines how many processes can be run in parallel during <code class="code docutils literal notranslate"><span class="pre">fit</span></code>.
By default only all cores are used. If you have more cores available, this has the most influence over how many
machine learning pipelines can be evaluated.</p>
<p><strong>max_total_time</strong>: the maximum time in seconds that GAMA should aim to use to construct a model from the data.
By default GAMA uses one hour. For large datasets, more time may be needed to get useful results.</p>
<p><strong>max_eval_time</strong>: the maximum time in seconds that GAMA is allowed to use to evaluate a single machine learning pipeline.
By default GAMA uses five minutes. For large datasets, more time may be needed to get useful results.</p>
<p>The <code class="code docutils literal notranslate"><span class="pre">fit</span></code> function can also be supplied with some optional hyperparameters:</p>
<p><strong>auto_ensemble_n</strong>: This hyperparameter specifies the number of models to include in the final ensemble.
The final ensemble may contain duplicates as a form of assigning weights.</p>
<p><strong>keep_cache</strong>: During the optimization process, each model evaluated is stored alongside its predictions.
This is needed for automatic ensemble construction.
Normally, this cache is deleted automatically, but should you wish to keep it, you can specify it here.</p>
</div>
<div class="section" id="logging">
<h2>Logging<a class="headerlink" href="#logging" title="Permalink to this headline">¶</a></h2>
<p>GAMA makes use of the default Python <a class="reference external" href="https://docs.python.org/3.5/library/logging.html">logging</a> module.
The log can be captured at different levels, and handled by one of several StreamHandlers.</p>
<p>The most common use cases would be to write a comprehensive log to file, as well as print important messages to <code class="code docutils literal notranslate"><span class="pre">stdout</span></code>.
Both of these cases are directly supported by GAMA through the <code class="code docutils literal notranslate"><span class="pre">verbosity</span></code> and <code class="code docutils literal notranslate"><span class="pre">keep_analysis_log</span></code> hyperparameters.
The level of <code class="code docutils literal notranslate"><span class="pre">verbosity</span></code> defines what level messages should be written to <code class="code docutils literal notranslate"><span class="pre">stdout</span></code>, and is by default set to <code class="code docutils literal notranslate"><span class="pre">logging.WARNING</span></code>.
The <code class="code docutils literal notranslate"><span class="pre">keep_analysis_log</span></code> sets whether or not to write <em>all</em> log output to file (<code class="code docutils literal notranslate"><span class="pre">logging.DEBUG</span></code> level).</p>
<p>However, the logging module offers you great flexibility on making your own variations.
The following script manually sets up GAMA to print to stdout (and ignores the built-in):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">logging</span>
<span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">from</span> <span class="nn">gama</span> <span class="k">import</span> <span class="n">GamaClassifier</span>

<span class="n">gama_log</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="s1">&#39;gama&#39;</span><span class="p">)</span>
<span class="n">gama_log</span><span class="o">.</span><span class="n">setLevel</span><span class="p">(</span><span class="n">logging</span><span class="o">.</span><span class="n">INFO</span><span class="p">)</span>

<span class="n">stdout_streamhandler</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">StreamHandler</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">stdout</span><span class="p">)</span>
<span class="n">stdout_streamhandler</span><span class="o">.</span><span class="n">setLevel</span><span class="p">(</span><span class="n">logging</span><span class="o">.</span><span class="n">INFO</span><span class="p">)</span>
<span class="n">gama_log</span><span class="o">.</span><span class="n">addHandler</span><span class="p">(</span><span class="n">stdout_streamhandler</span><span class="p">)</span>

<span class="n">automl</span> <span class="o">=</span> <span class="n">GamaClassifier</span><span class="p">(</span><span class="n">max_total_time</span><span class="o">=</span><span class="mi">180</span><span class="p">,</span> <span class="n">verbosity</span><span class="o">=</span><span class="n">logging</span><span class="o">.</span><span class="n">ERROR</span><span class="p">)</span>
</pre></div>
</div>
<p>Running the above script display the GAMA version used, and the hyperparameter values on initialization:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Using</span> <span class="n">GAMA</span> <span class="n">version</span> <span class="mf">0.1</span><span class="o">.</span><span class="mf">0.</span>
<span class="n">GamaClassifier</span><span class="p">(</span><span class="n">cache_dir</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span><span class="n">verbosity</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span><span class="n">n_jobs</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="n">max_eval_time</span><span class="o">=</span><span class="mi">300</span><span class="p">,</span><span class="n">max_total_time</span><span class="o">=</span><span class="mi">180</span><span class="p">,</span><span class="n">population_size</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span><span class="n">random_state</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span><span class="n">scoring</span><span class="o">=</span><span class="s1">&#39;neg_log_loss&#39;</span><span class="p">))</span>
</pre></div>
</div>
<p>Actual values or hyperparameter names may vary depending on the version of GAMA you are using.
Make sure to set <em>both</em> the log level of the log and the stream handler.</p>
<dl class="simple">
<dt>An overview the log levels:</dt><dd><ul class="simple">
<li><p><strong>debug</strong>: messages for developers and computers. This includes output required for log visualization (see next section). Expect a lot of output.</p></li>
<li><p><strong>info</strong>: general information about the optimization process.</p></li>
<li><p><strong>warning</strong>: serious errors that do not prohibit GAMA from running to completion (but results could be suboptimal).</p></li>
<li><p><strong>error</strong>: errors which prevent GAMA from running to completion.</p></li>
</ul>
</dd>
</dl>
</div>
<div class="section" id="log-visualization">
<h2>Log Visualization<a class="headerlink" href="#log-visualization" title="Permalink to this headline">¶</a></h2>
<p>When using the default hyperparameters, GAMA will produce a log file called <code class="code docutils literal notranslate"><span class="pre">gama.log</span></code>.
This log file is structured so that important events are easy to parse.
For an example and easy way to visualize information from the log file, take a look at <a class="reference external" href="https://github.com/PGijsbers/gama/blob/master/notebooks/GAMA%20Log%20Parser.ipynb">this notebook</a>.</p>
</div>
<div class="section" id="events-and-observers">
<h2>Events and Observers<a class="headerlink" href="#events-and-observers" title="Permalink to this headline">¶</a></h2>
<p>It is also possible to programmatically receive updates of the optimization process through the events:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">gama</span> <span class="k">import</span> <span class="n">GamaClassifier</span>

<span class="k">def</span> <span class="nf">process_individual</span><span class="p">(</span><span class="n">individual</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{}</span><span class="s1"> was evaluated. Fitness is </span><span class="si">{}</span><span class="s1">.&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">individual</span><span class="p">,</span> <span class="n">individual</span><span class="o">.</span><span class="n">fitness</span><span class="o">.</span><span class="n">values</span><span class="p">))</span>

<span class="n">automl</span> <span class="o">=</span> <span class="n">GamaClassifier</span><span class="p">()</span>
<span class="n">automl</span><span class="o">.</span><span class="n">evaluation_completed</span><span class="p">(</span><span class="n">process_individual</span><span class="p">)</span>
<span class="n">automl</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
</pre></div>
</div>
<p>This can be used to create useful observers, such as one that keeps track of the Pareto front or visualizes progress.</p>
</div>
<div class="section" id="generated-files">
<h2>Generated Files<a class="headerlink" href="#generated-files" title="Permalink to this headline">¶</a></h2>
<p>GAMA will create some files during the optimization process. Here is an overview of produced files:</p>
<p><strong>Folder: ‘{DATE}_{STARTTIME}_GAMA’</strong>: This folder is used to save results from evaluations during the optimization process.
The files in this folders are needed to create an ensemble of pipelines in the post-processing phase of GAMA.
You can specify the name of this folder with the <code class="code docutils literal notranslate"><span class="pre">cache_dir</span></code> hyperparameter when initializing a GAMA object.
By default, this folders gets deleted after the <code class="code docutils literal notranslate"><span class="pre">fit</span></code> call is done.
In order to preserve this folder (e.g. to later construct different ensembles or later analysis), specify <code class="code docutils literal notranslate"><span class="pre">keep_cache=True</span></code> when calling <code class="code docutils literal notranslate"><span class="pre">fit</span></code>.</p>
<p><strong>File: gama.log</strong>: This file contains all information about the optimization process, and by default is not removed.
As described in <a class="reference internal" href="#log-visualization">Log Visualization</a> this file can be used to generate visualizations about the optimization process.
If you wish to have the file be automatically deleted, specify <code class="code docutils literal notranslate"><span class="pre">keep_analysis_log=False</span></code> when initializing a GAMA object, as per the <a href="#id2"><span class="problematic" id="id3">`Examples`_</span></a>.</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018-2019, Pieter Gijsbers

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>